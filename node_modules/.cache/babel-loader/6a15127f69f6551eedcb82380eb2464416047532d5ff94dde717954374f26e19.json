{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { APIService } from \"@/http/APIService\";\nconst apiService = new APIService();\nimport axios from \"axios\";\nimport router from \"../router\";\nexport default {\n  data() {\n    return {\n      movies: {},\n      validUserName: \"Guest\",\n      movieSize: 0,\n      showMsg: '',\n      isMobile: false,\n      headers: [{\n        text: 'Name',\n        sortable: false,\n        align: 'left'\n      }, {\n        text: 'Description',\n        sortable: false,\n        align: 'left'\n      }, {\n        text: 'Year',\n        sortable: false,\n        align: 'left'\n      }, {\n        text: 'Rating',\n        sortable: false,\n        align: 'left'\n      }, {\n        text: 'Update',\n        sortable: false,\n        align: 'center'\n      }, {\n        text: 'Delete',\n        sortable: false,\n        align: 'center'\n      }]\n    };\n  },\n  mounted() {\n    this.getMovies();\n    // this.showMessages();\n  },\n\n  methods: {\n    onResize() {\n      if (window.innerWidth > 600) this.isMobile = true;else this.isMobile = false;\n    },\n    showMessages() {\n      console.log(this.$route.params.msg);\n      if (this.$route.params.msg) {\n        this.showMsg = this.$route.params.msg;\n      }\n    },\n    getMovies() {\n      apiService.getMovieList().then(response => {\n        this.movies = response.data.data;\n        this.movieSize = this.movies.length;\n        if (localStorage.getItem(\"isAuthenticates\") && JSON.parse(localStorage.getItem(\"isAuthenticates\")) === true) {\n          this.validUserName = JSON.parse(localStorage.getItem(\"log_user\"));\n        }\n      }).catch(error => {\n        if (error.response.status === 401) {\n          localStorage.removeItem(\"isAuthenticates\");\n          localStorage.removeItem(\"log_user\");\n          localStorage.removeItem(\"token\");\n          router.push(\"/auth\");\n        }\n      });\n    },\n    addNewMovie() {\n      if (localStorage.getItem(\"isAuthenticates\") && JSON.parse(localStorage.getItem(\"isAuthenticates\")) === true) {\n        router.push('/movie-create');\n      } else {\n        router.push(\"/auth\");\n      }\n    },\n    updateMovie(movie) {\n      router.push(\"/movie-create/\" + movie.pk);\n    },\n    deleteMovie(movie) {\n      if (confirm(\"Do you really want to delete?\")) {\n        apiService.deleteMovie(movie.pk).then(response => {\n          if (response.status === 204) {\n            router.push('/movie-list/deleted/');\n            this.getMovies();\n          }\n        }).catch(error => {\n          if (error.response.status === 401) {\n            localStorage.removeItem('isAuthenticates');\n            localStorage.removeItem('log_user');\n            localStorage.removeItem('token');\n            router.push(\"/auth\");\n          }\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["APIService","apiService","axios","router","data","movies","validUserName","movieSize","showMsg","isMobile","headers","text","sortable","align","mounted","getMovies","methods","onResize","window","innerWidth","showMessages","console","log","$route","params","msg","getMovieList","then","response","length","localStorage","getItem","JSON","parse","catch","error","status","removeItem","push","addNewMovie","updateMovie","movie","pk","deleteMovie","confirm"],"sources":["C:\\Users\\gabrielconner\\movie-fe\\src\\components\\MovieList.vue"],"sourcesContent":["<template>\r\n <div class=\"container-fluid\">\r\n <!--Welcome Title -->\r\n <div class=\"row align-items-center justify-content-center\">\r\n <div class=\"col col-12 align-items-center justify-content-center\">\r\n <blockquote>\r\n Welcome {{ validUserName }}!\r\n <footer>\r\n <small>\r\n <em>&mdash; Every great film should seem new every time you see it.-\r\nRoger Ebert</em>\r\n </small>\r\n </footer>\r\n </blockquote>\r\n </div>\r\n <div class=\"col-12 col-md-10 col-lg-10 col-12 align-items-center justify-content\u0002center\">\r\n <div class=\"alert alert-success\"\r\n v-if=\"showMsg === 'new'\"\r\n :value=\"true\">\r\n New movie has been added.\r\n </div>\r\n <div class=\"alert alert-success\"\r\n v-if=\"showMsg === 'update'\"\r\n :value=\"true\">\r\n Movie information has been updated.\r\n </div>\r\n <div class=\"alert alert-success\"\r\n v-if=\"showMsg === 'deleted'\"\r\n :value=\"true\">\r\n Selected Movie has been deleted.\r\n </div>\r\n </div>\r\n </div>\r\n <!-- Data table -->\r\n <div class=\"row align-items-center justify-content-center\">\r\n <div class=\"d-md-none\" id=\"collapsable-card\" style=\"width: 80%\">\r\n <button type=\"button\" class=\"btn btn-primary\" @click=\"addNewMovie\"\r\nstyle=\"background-color: white; border-color: white\">\r\n <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"50\" height=\"50\" fill=\"#0275d8\"\r\nclass=\"bi bi-plus-circle-fill\" viewBox=\"0 0 16 16\">\r\n <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h\u00023a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z\"/>\r\n </svg>\r\n </button>\r\n <div class=\"card\" v-for=\"movie in movies\" v-bind:key=\"movie\">\r\n <div class=\"card-header\" :id=\"'heading' + movie.pk\">\r\n <button class=\"btn btn-link collapsed\" data-bs-toggle=\"collapse\" :data-bs\u0002target=\"'#collapse' + movie.pk\" aria-expanded=\"true\" :aria-controls=\"'collapse' + movie.pk\">\r\n <h6 style=\"color: #0275d8; float: left\">{{movie.name}}</h6>\r\n </button>\r\n </div>\r\n <div :id=\"'collapse' + movie.pk\" class=\"collapse\" :aria-labelledby=\"'heading' +\r\nmovie.pk\" data-bs-parent=\"#collapsable-card\">\r\n <div class=\"card-body\">\r\n <p><b>Rating:</b> {{movie.rating}}</p>\r\n <p><b>Year:</b> {{movie.year}}</p>\r\n <p>{{movie.description}}</p>\r\n <div class=\"btn-group\">\r\n <button @click=\"updateMovie(movie)\" style=\"background-color:\r\ntransparent; padding: 0;\">\r\n <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\"\r\nfill=\"currentColor\" class=\"bi bi-pencil\" viewBox=\"0 0 16 16\">\r\n <path d=\"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10\r\n10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5\r\n4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1\r\n.5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-\r\n1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z\"/>\r\n </svg></button>\r\n <button @click=\"deleteMovie(movie)\" style=\"background-color: transparent;\r\npadding: 0;\">\r\n <svg @click=\"deleteMovie\" xmlns=\"http://www.w3.org/2000/svg\"\r\nwidth=\"20\" height=\"20\" fill=\"currentColor\" class=\"bi bi-trash-fill\" viewBox=\"0 0 16 16\">\r\n <path d=\"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2\r\n2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3\r\n4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v\u00027A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z\"/>\r\n </svg></button>\r\n </div>\r\n </div>\r\n </div>\r\n </div>\r\n </div>\r\n <div class=\"col col-12 col-md-10 d-none d-xl-block d-lg-block d-md-block\">\r\n <table class=\"table table-hover\" style=\"overflow-y: auto\"\r\n :headers=\"headers\">\r\n <thead>\r\n <tr>\r\n <th scope=\"col\">Name</th>\r\n <th scope=\"col\">Description</th>\r\n <th scope=\"col\">Year</th>\r\n <th scope=\"col\">Rating</th>\r\n <th scope=\"col\">Update</th>\r\n <th scope=\"col\">Delete</th>\r\n </tr>\r\n </thead>\r\n <tbody>\r\n <tr v-for = \"movie in movies\" v-bind:key=\"movie\">\r\n <th scope=\"row\">{{movie.name}}</th>\r\n <td>{{movie.description}}</td>\r\n <td>{{movie.year}}</td>\r\n <td>{{movie.rating}}</td>\r\n <td @click=\"updateMovie(movie)\"><button style=\"background-color:\r\ntransparent; padding: 0;\">\r\n <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"\r\nfill=\"currentColor\" class=\"bi bi-pencil\" viewBox=\"0 0 16 16\">\r\n <path d=\"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10\r\n10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5\r\n4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1\r\n.5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-\r\n1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z\"/>\r\n </svg></button>\r\n </td>\r\n <td @click=\"deleteMovie(movie)\"><button style=\"background-color:\r\ntransparent; padding: 0;\">\r\n <svg @click=\"deleteMovie\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\"\r\nheight=\"16\" fill=\"currentColor\" class=\"bi bi-trash-fill\" viewBox=\"0 0 16 16\">\r\n <path d=\"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2\r\n0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3\r\n4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v\u00027A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z\"/>\r\n </svg></button>\r\n </td>\r\n </tr>\r\n </tbody>\r\n </table>\r\n <button type=\"button\" class=\"btn btn-primary\" @click=\"addNewMovie\">Add New\r\nMovie</button>\r\n </div>\r\n </div>\r\n </div>\r\n</template>\r\n<script>\r\n import { APIService } from \"@/http/APIService\";\r\n const apiService = new APIService();\r\n import axios from \"axios\";\r\n import router from \"../router\";\r\n export default {\r\n data() {\r\n return {\r\n movies: {},\r\n validUserName: \"Guest\",\r\n movieSize: 0,\r\n showMsg: '',\r\n isMobile: false,\r\n headers: [\r\n {text: 'Name', sortable: false, align: 'left'},\r\n {text: 'Description', sortable: false, align: 'left',},\r\n {text: 'Year', sortable: false, align: 'left',},\r\n {text: 'Rating', sortable: false, align: 'left',},\r\n {text: 'Update', sortable: false, align: 'center',},\r\n {text: 'Delete', sortable: false, align: 'center',},\r\n ],\r\n };\r\n },\r\n mounted() {\r\n this.getMovies();\r\n // this.showMessages();\r\n },\r\n methods: {\r\n onResize() {\r\n if (window.innerWidth > 600)\r\n this.isMobile = true;\r\n else\r\n this.isMobile = false;\r\n },\r\n showMessages(){\r\n console.log(this.$route.params.msg)\r\n if (this.$route.params.msg) {\r\n this.showMsg = this.$route.params.msg;\r\n }\r\n },\r\n getMovies() {\r\n apiService\r\n .getMovieList()\r\n .then((response) => {\r\n this.movies = response.data.data;\r\n this.movieSize = this.movies.length;\r\n if (\r\n localStorage.getItem(\"isAuthenticates\") &&\r\n JSON.parse(localStorage.getItem(\"isAuthenticates\")) === true\r\n ) {\r\n this.validUserName = JSON.parse(localStorage.getItem(\"log_user\"));\r\n }\r\n })\r\n .catch((error) => {\r\n if (error.response.status === 401) {\r\n localStorage.removeItem(\"isAuthenticates\");\r\n localStorage.removeItem(\"log_user\");\r\n localStorage.removeItem(\"token\");\r\n router.push(\"/auth\");\r\n }\r\n });\r\n },\r\n addNewMovie() {\r\n if (localStorage.getItem(\"isAuthenticates\")\r\n && JSON.parse(localStorage.getItem(\"isAuthenticates\")) === true) {\r\n router.push('/movie-create');\r\n } else {\r\n router.push(\"/auth\");\r\n }\r\n },\r\n updateMovie(movie) {\r\n router.push(\"/movie-create/\" + movie.pk);\r\n },\r\n deleteMovie(movie) {\r\n if(confirm(\"Do you really want to delete?\")) {\r\n apiService.deleteMovie(movie.pk).then(response => {\r\n if (response.status === 204) {\r\n router.push('/movie-list/deleted/')\r\n this.getMovies()\r\n }\r\n }).catch(error => {\r\n if (error.response.status === 401) {\r\n localStorage.removeItem('isAuthenticates');\r\n localStorage.removeItem('log_user');\r\n localStorage.removeItem('token');\r\n router.push(\"/auth\");\r\n }\r\n });\r\n }\r\n }\r\n },\r\n };\r\n</script>\r\n<style>\r\n button {\r\n padding: 1rem;\r\n border: 0;\r\n cursor: pointer;\r\n }\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}